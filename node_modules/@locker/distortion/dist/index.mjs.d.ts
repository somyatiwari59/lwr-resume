import { SandboxKey, ProxyTarget } from "@locker/shared";
import { GlobalObject } from "@locker/shared-dom";
import { SandboxRecord as SandboxRecordBase } from "@locker/shared-dom";
import { DataType, Instrumentation } from "@locker/instrumentation";
type AttributeChangedCallbackArgs = [
    string,
    ...any
];
// eslint-disable-next-line no-shadow
declare const enum CookieSameSite {
    "strict" = 0,
    "lax" = 1,
    "none" = 2
}
type CookieListItem = {
    name: string;
    value: string;
    domain?: string;
    path: string;
    expires?: number;
    secure: boolean;
    sameSite: CookieSameSite;
};
interface CustomElementDefinition {
    LocalCtor: CustomElementConstructor;
    PivotCtor: CustomElementConstructor | undefined;
    adoptedCallback: (() => void) | undefined;
    attributeChangedCallback: ((name: string, oldValue: any, newValue: any) => void) | undefined;
    connectedCallback: (() => void) | undefined;
    disconnectedCallback: (() => void) | undefined;
    observedAttributes: Set<string>;
}
type CustomElementRegistryPerKey = Map<string, VirtualCustomElementRegistry>;
type Distortion = ProxyTarget;
type DistortionFactory = (record: SandboxRecord) => DistortionFactoryEntry;
type DistortionFactoryEntry = DistortionMapEntry | void;
type DistortionFactoryInitializer = (record: SandboxRecord) => DistortionFactory;
type DistortionFunction = CallableFunction | NewableFunction;
type DistortionMap = WeakMap<ProxyTarget, Distortion>;
type DistortionMapEntry = readonly [
    ProxyTarget,
    Distortion
];
type HTMLElementConstructor = typeof HTMLElement;
type NodeNameMapSetNamedItem = (attr: Attr) => Attr | null;
interface PropertyDescriptorRegistry {
    [key: PropertyKey]: PropertyDescriptor | null;
}
type PropertyDescriptorRegistryMap = WeakMap<object, PropertyDescriptorRegistry>;
interface SandboxRecord extends SandboxRecordBase {
    BASIC_INSTRUMENTATION_DATA: DataType;
    distortions: DistortionMap;
    instrumentation: Instrumentation;
    key: SandboxKey;
    root: SandboxRecord;
}
// eslint-disable-next-line no-shadow
declare const enum SandboxType {
    External = 0,
    Internal = 1
}
interface StorageMeta {
    namespace: string;
    storage: Storage;
}
interface VirtualCustomElementRegistry {
    applyDefine(cer: CustomElementRegistry, args: Parameters<typeof customElements.define>): void;
    applyGet(cer: CustomElementRegistry, args: Parameters<typeof customElements.get>): ReturnType<typeof customElements.get>;
    applyWhenDefined: (cer: CustomElementRegistry, args: Parameters<typeof customElements.whenDefined>) => WhenDefinedResult;
    getDefinition: (instance: HTMLElement) => CustomElementDefinition | undefined;
    newCtor: (instance: HTMLElement, newTarget: any, originalCtor: HTMLElementConstructor) => HTMLElement;
    scheduleConnectedCallback: (instance: HTMLElement, tagName: string) => void;
    scheduleDisconnectedCallback: (instance: HTMLElement, tagName: string) => void;
    scheduleOrUpgrade: (instance: HTMLElement, tagName: string, originalDefinition: CustomElementDefinition) => void;
    setDefinition: (instance: HTMLElement, pivotDefinition: CustomElementDefinition) => void;
    upgrade: (instance: HTMLElement, originalDefinition: CustomElementDefinition, pivotDefinition: CustomElementDefinition) => void;
}
type WhenDefinedResult = Promise<CustomElementConstructor | DOMException | TypeError>;
declare function patchGlobalObject(globalObject: GlobalObject, document?: Document): void;
declare function unpatchGlobalObject(globalObject: GlobalObject, document?: Document): void;
declare const internalDistortionFactoryInitializers: readonly DistortionFactoryInitializer[];
declare const internalKeyedDistortionFactoryInitializers: readonly DistortionFactoryInitializer[];
declare const externalDistortionFactoryInitializers: readonly DistortionFactoryInitializer[];
declare const externalKeyedDistortionFactoryInitializers: readonly DistortionFactoryInitializer[];
declare const DocumentBlockedProperties: readonly string[];
declare function finalizeAttributeDistortions(record: SandboxRecord): void;
declare const ElementBlockedProperties: readonly string[];
declare const EventBlockedProperties: readonly string[];
declare const HTMLElementBlockedAttributes: readonly string[];
declare const HTMLElementBlockedProperties: readonly string[];
declare const HTMLEmbedElementBlockedProperties: readonly string[];
// https://www.w3schools.com/tags/tag_iframe.asp
declare const HTMLIFrameElementBlockedAttributes: readonly string[];
declare const HTMLIFrameElementBlockedProperties: readonly string[];
declare const HTMLObjectElementBlockedProperties: readonly string[];
declare const HTMLScriptElementBlockedAttributes: readonly string[];
declare const HTMLScriptElementBlockedProperties: readonly string[];
declare const SVGElementBlockedAttributes: readonly string[];
declare const SVGElementBlockedProperties: readonly string[];
declare const UIEventBlockedProperties: readonly string[];
declare function addBlockedAttributeDistortionFactoryInitializers(Ctor: any, ctorName: string, attributes: string[] | readonly string[], factoryInitializers: DistortionFactoryInitializer[]): void;
declare function addBlockedPropertyDistortionFactoryInitializers({ document }: SandboxRecord, proto: any, properties: PropertyKey[] | readonly PropertyKey[], factoryInitializers: DistortionFactoryInitializer[]): void;
declare const WindowBlockedProperties: readonly string[];
declare function initDistortionWindowPostMessage({ globalObject: { postMessage: originalPostMessage } }: SandboxRecord): DistortionFactory;
declare const XSLTProcessorBlockedProperties: readonly string[];
export { patchGlobalObject, unpatchGlobalObject, externalDistortionFactoryInitializers, externalKeyedDistortionFactoryInitializers, internalDistortionFactoryInitializers, internalKeyedDistortionFactoryInitializers, DocumentBlockedProperties, finalizeAttributeDistortions, ElementBlockedProperties, EventBlockedProperties, HTMLElementBlockedAttributes, HTMLElementBlockedProperties, HTMLEmbedElementBlockedProperties, HTMLIFrameElementBlockedAttributes, HTMLIFrameElementBlockedProperties, HTMLObjectElementBlockedProperties, HTMLScriptElementBlockedAttributes, HTMLScriptElementBlockedProperties, SVGElementBlockedAttributes, SVGElementBlockedProperties, AttributeChangedCallbackArgs, CookieSameSite, CookieListItem, CustomElementDefinition, CustomElementRegistryPerKey, Distortion, DistortionFactory, DistortionFactoryEntry, DistortionFactoryInitializer, DistortionFunction, DistortionMap, DistortionMapEntry, HTMLElementConstructor, NodeNameMapSetNamedItem, PropertyDescriptorRegistry, PropertyDescriptorRegistryMap, SandboxRecord, SandboxType, StorageMeta, VirtualCustomElementRegistry, WhenDefinedResult, UIEventBlockedProperties, addBlockedAttributeDistortionFactoryInitializers, addBlockedPropertyDistortionFactoryInitializers, WindowBlockedProperties, initDistortionWindowPostMessage, XSLTProcessorBlockedProperties };
