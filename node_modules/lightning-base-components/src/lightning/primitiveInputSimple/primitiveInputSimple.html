<template>
    <div part="input-text">
        <template if:false={hasExternalLabel}>
            <label class={computedLabelClass} for="input" part="label" data-form-label id="input-text-label" >
                <template if:true={required}>
                    <abbr class="slds-required" title={i18n.required}>*</abbr>
                </template>
                {label}
            </label>
            <lightning-helptext if:true={fieldLevelHelp} content={fieldLevelHelp} alternative-text={helptextAlternativeText}></lightning-helptext>
        </template>
        <div class={computedFormElementClass} part="input-container" type={internalType}>
            <input
                accesskey={accessKey}
                aria-errormessage="help-message"
                aria-haspopup={ariaHasPopup}
                aria-invalid={ariaInvalid}
                aria-label={ariaLabel}
                autocomplete={autocomplete}
                class="slds-input"
                disabled={disabled}
                id="input"
                inputmode={inputMode}
                max={max}
                maxlength={maxLength}
                min={min}
                minlength={minLength}
                name={name}
                onblur={handleBlur}
                onchange={handleChange}
                onfocus={handleFocus}
                oninput={handleInput}
                onkeydown={handleKeyDown}
                part="input"
                pattern={pattern}
                placeholder={placeholder}
                required={required}
                readonly={readOnly}
                step={step}
                type={internalType}>

            <template if:true={isTypeSearch}>
                <lightning-primitive-icon icon-name="utility:search" variant="bare" svg-class="slds-input__icon slds-input__icon_left slds-icon-text-default"></lightning-primitive-icon>
                <div class="slds-input__icon-group slds-input__icon-group_right">
                    <template if:true={isLoading}>
                        <div role="status" class="slds-spinner slds-spinner_brand slds-spinner_x-small slds-input__spinner">
                            <span class="slds-assistive-text">{i18n.loading}</span>
                            <div class="slds-spinner__dot-a"></div>
                            <div class="slds-spinner__dot-b"></div>
                        </div>
                    </template>
                    <template if:true={showClearButton}>
                        <button data-element-id="searchClear" class="slds-input__icon slds-input__icon_right slds-button slds-button_icon" onblur={handleBlur} onclick={clearAndSetFocusOnInput}>
                            <lightning-primitive-icon icon-name="utility:clear" variant="bare" svg-class="slds-button__icon"></lightning-primitive-icon>
                            <span class="slds-assistive-text">{i18n.clear}</span>
                        </button>
                    </template>
                </div>
            </template>
        </div>
    </div>
    <template if:true={_helpMessage}>
        <div id="help-message" class="slds-form-element__help" data-help-message role="alert" part="help-text">{_helpMessage}</div>
    </template>
</template>
